<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Pagina Principal</title>
  <link rel="stylesheet" href="../CSS/styles.css">
  <link rel="stylesheet" href="https://cdn.plyr.io/3.6.4/plyr.css">
  <script src="https://kit.fontawesome.com/8da1ffe54b.js" crossorigin="anonymous"></script>
  <style>
    /* Estilos opcionales para mejorar la apariencia */
    .otros_productos {
        text-align: center;
    }
    .product {
        border: 1px solid #ccc;
        border-radius: 5px;
        margin-bottom: 20px;
        padding: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .product img {
        max-width: 100%;
        height: auto;
        display: block;
        border-radius: 5px;
        margin-bottom: 10px;
    }
    .product h2 {
        margin-top: 0;
        margin-bottom: 5px;
    }
    .product p {
        margin-bottom: 5px;
    }
    .product button {
        padding: 8px 16px;
        border: none;
        border-radius: 5px;
        background-color: #007bff;
        color: #fff;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    .product button:hover {
        background-color: #0056b3;
    }
  </style>
</head>
<body>

<header>
    <div class="logo">
        <img src="../media/logo.png" alt=""><a href="https://http.cat/status/404"></a>
    </div>
    <div class="menu">
        <div class="group">
            <svg class="icon" aria-hidden="true" viewBox="0 0 24 24"><g><path d="M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"></path></g></svg>
            <input placeholder="Buscar..." type="search" class="input">
        </div>
    </div>
    <div>
        <button class="carrito">
            <a href="https://http.cat/status/404"></a><img class="img" src="../media/IMG PRINCIPAL/cart-shopping-solid.svg"></a>
        </button>
    </div>
    <div class="perfil">
        <img src="../media/IMG PRINCIPAL/user-solid.svg">
        <ul>            
            <li><a href="perfil.html">Ver perfil</a></li>
            <li><a href="productosAdmin.html">Subir Producto</a></li>
            <li><a href="https://http.cat/status/404">Administrar</a></li>
            <li><a href="index.html">Cerrar sesión</a></li>  
        </ul>
    </div>
</header>

<div>
    <nav>
        <ul>
            <li><a href="https://http.cat/status/404">Categorias</a></li>
            <li><a href="https://http.cat/status/404">Empresas</a></li>
            <li><a href="https://http.cat/status/404">Servicios</a></li>
            <li><a href="https://http.cat/status/404">Contacto</a></li>
        </ul>
    </nav>
</div>

<div class="otros_productos">
  <h1>Lista de Productos</h1>
  <div id="products-container">
      <!-- Aquí se cargarán dinámicamente los productos -->
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
  // Función para obtener productos desde la API
  async function fetchProducts() {
      try {
          const response = await axios.get('http://localhost:3000/api/productos/getproductos');
          console.log('Productos:', response.data);
          return response.data;
      } catch (error) {
          console.error('Error fetching products:', error);
          return [];
      }
  }

  // Función para mostrar los productos en el HTML
  async function showProducts() {
      const products = await fetchProducts();
      const container = document.getElementById("products-container");
      container.innerHTML = ""; // Limpiar el contenedor

      products.forEach(function(product) {
          const productHTML = `
              <div class="product">
                  <img src="${product.imageUrl}" alt="${product.name}">
                  <div class="product-info">
                      <h2>${product.name}</h2>
                      <p>${product.description}</p>
                      <p>Precio: ${product.price}</p>
                      <p>Unidades disponibles: ${product.units}</p>
                      <button>Añadir al carrito</button>
                  </div>
              </div>
          `;
          container.innerHTML += productHTML;
      });
  }

  // Llamar a la función para mostrar los productos cuando la página cargue
  window.onload = showProducts;
</script>
</body>
</html>